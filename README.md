# Russian Jazz Service

Официальный сайт Союза Джазовых Музыкантов Санкт-Петербурга.

## Архитектура проекта

```
russian-jazz-service/
├── admin/                    ← Next.js CMS (Payload)
├── public/                   ← Статические файлы
│   ├── assets/              ← CSS, JS, видео, изображения
│   ├── *.html               ← HTML страницы
│   └── generated/           ← Сгенерированные страницы из CMS
├── scripts/                  ← Скрипты управления
│   ├── manage.js            ← Главный скрипт управления
│   └── build-static.js      ← Генерация статических страниц
└── content/                  ← Контентные файлы
```

## Быстрый старт

### 1. Установка зависимостей
```bash
npm install
```

### 2. Настройка базы данных
1. Установите PostgreSQL
2. Создайте базу данных: `russian_jazz_service`
3. Настройте файл `admin/.env`:
```env
DATABASE_URI=postgresql://postgres:password@localhost:5432/russian_jazz_service
PAYLOAD_SECRET=your-secret-key-here
```

### 3. Запуск проекта

#### Вариант A: Полный запуск (рекомендуется)
```bash
npm run dev:full
```
- CMS админка: http://localhost:3001/admin
- Статические страницы: http://localhost:8080

#### Вариант B: Только админка
```bash
npm run dev:admin
```
- CMS админка: http://localhost:3001/admin

#### Вариант C: Только статика
```bash
npm run build:static
npm run serve:static
```
- Статические страницы: http://localhost:8080

## Работа с контентом

### 1. Откройте админку
Перейдите на http://localhost:3001/admin

### 2. Создайте первого пользователя
При первом запуске система попросит создать администратора.

### 3. Добавьте контент
- **Manifest Principles** - принципы манифеста (10 принципов)
- **Events** - события и концерты
- **Artists** - музыканты
- **Media** - изображения и файлы

### 4. Генерация статических страниц
После добавления контента:
```bash
npm run build:static
```

## API эндпоинты

- **Экспорт контента**: http://localhost:3001/api/export-content
- **GraphQL**: http://localhost:3001/api/graphql
- **GraphQL Playground**: http://localhost:3001/api/graphql-playground

## Структура контента

### Manifest Principles (Принципы манифеста)
1. Принцип Диалога
2. Демократия Творчества
3. Авторитет Профессионализма
4. Свобода Эксперимента
5. Ориентация на Будущее
6. Равенство Основ
7. Единство через Музыку
8. Образование как Основа
9. Уважение к Наследию
10. Служение Музыке и Городу

### Events (События)
- Концерты и джем-сейшены
- Мастер-классы
- Фестивали
- Встречи сообщества

### Artists (Артисты)
- Музыканты Союза
- Приглашенные артисты
- Молодые таланты

## Технологии

- **CMS**: Next.js + Payload CMS
- **База данных**: PostgreSQL
- **Фронтенд**: Статические HTML/CSS/JS
- **Генерация**: Node.js скрипты
- **Хостинг**: Любой статический хостинг

## Разработка

### Добавление новых коллекций
1. Создайте файл в `admin/src/collections/`
2. Добавьте коллекцию в `admin/src/payload.config.ts`
3. Обновите API эндпоинт `admin/src/app/api/export-content/route.ts`
4. Обновите скрипт генерации `scripts/build-static.js`

### Кастомизация статических страниц
Редактируйте файлы в папке `public/` или обновите шаблоны в `scripts/build-static.js`.

## Деплой

### Статические файлы
Скопируйте содержимое папки `public/` на любой статический хостинг.

### CMS
Разверните папку `admin/` на платформе, поддерживающей Next.js (Vercel, Netlify, etc.).

## Поддержка

При возникновении проблем:
1. Проверьте логи в терминале
2. Убедитесь, что PostgreSQL запущен
3. Проверьте настройки в `admin/.env`
4. Перезапустите серверы

---

© 2025 Russian Jazz Service — Союз Джазовых Музыкантов СПб
