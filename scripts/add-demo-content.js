#!/usr/bin/env node

/**
 * –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–µ–º–æ-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ CMS
 * –ó–∞–ø—É—Å–∫: node scripts/add-demo-content.js
 */

const API_URL = process.env.API_URL || 'http://localhost:3002'

// –î–µ–º–æ-–∫–æ–Ω—Ç–µ–Ω—Ç: –ø—Ä–∏–Ω—Ü–∏–ø—ã –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
const manifestPrinciples = [
  {
    order: 1,
    title: "–ü—Ä–∏–Ω—Ü–∏–ø –î–∏–∞–ª–æ–≥–∞",
    description: "–ú—ã –æ—Ç–∫–∞–∑—ã–≤–∞–µ–º—Å—è –æ—Ç –¥–æ–≥–º –∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –∏—Å—Ç–∏–Ω –≤ –º—É–∑—ã–∫–µ. –ö–∞–∂–¥–æ–µ –º–Ω–µ–Ω–∏–µ, —Å—Ç–∏–ª—å, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –±—ã—Ç—å —É—Å–ª—ã—à–∞–Ω–Ω—ã–º –∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–º. –ú—ã –Ω–µ –Ω–∞—Å—Ç–∞–∏–≤–∞–µ–º –Ω–∞ —Å–≤–æ–µ–π –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–∞–≤–æ—Ç–µ, —Å–æ–∑–¥–∞–≤–∞—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ –∏–¥–µ—è–º–∏ –∏ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–≥–æ —Å–ø–æ—Ä–∞.",
    isActive: true
  },
  {
    order: 2,
    title: "–î–µ–º–æ–∫—Ä–∞—Ç–∏—è –¢–≤–æ—Ä—á–µ—Å—Ç–≤–∞",
    description: "–°–æ—é–∑ ‚Äî –æ—Ç–∫—Ä—ã—Ç–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≤—Å–µ—Ö, –∫—Ç–æ —Ä–∞–∑–¥–µ–ª—è–µ—Ç –Ω–∞—à–∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã, –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞, –æ–ø—ã—Ç–∞, —à–∫–æ–ª—ã –∏–ª–∏ –∂–∞–Ω—Ä–æ–≤—ã—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ: –æ—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –¥–∂–∞–∑–∞ –¥–æ –∞–≤–∞–Ω–≥–∞—Ä–¥–∞, —Ñ—Ä–∏-–¥–∂–∞–∑–∞, contemporary, –¥–∂–∞–∑-—Ä–æ–∫–∞, —Ñ—å—é–∂–Ω, –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–æ–π, —Ö–∏–ø-—Ö–æ–ø–æ–º, R&B, —Ä–æ–∫–æ–º, –ø–æ–ø–æ–º, –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–π –º—É–∑—ã–∫–æ–π.",
    isActive: true
  },
  {
    order: 3,
    title: "–ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º–∞",
    description: "–î–µ–º–æ–∫—Ä–∞—Ç–∏—è –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç –≤—Å–µ–¥–æ–∑–≤–æ–ª–µ–Ω–Ω–æ—Å—Ç—å. –ú—ã –ø—Ä–∏–∑–Ω–∞–µ–º –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞, –≥–ª—É–±–∏–Ω—ã –∑–Ω–∞–Ω–∏–π, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —ç—Ç–∏–∫–∏. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –°–æ—é–∑–∞ —Å–æ—á–µ—Ç–∞–µ—Ç –∫–æ–ª–ª–µ–≥–∏–∞–ª—å–Ω–æ—Å—Ç—å –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏—è—Ö —Å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –≤–ª–∞—Å—Ç—å—é, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–π –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ä–µ—à–µ–Ω–∏–π –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤.",
    isActive: true
  },
  {
    order: 4,
    title: "–°–≤–æ–±–æ–¥–∞ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞",
    description: "–ú—ã —Å—á–∏—Ç–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ, —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∏ –≥–ª—É–±–æ–∫–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞ (—Ñ—Ä–∏-–¥–∂–∞–∑, –∞–≤–∞–Ω–≥–∞—Ä–¥, –∏–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è –º—É–∑—ã–∫–∞). –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–∏—Å–∫–∞ –∏ —Ä–∏—Å–∫–∞ ‚Äî –æ—Å–Ω–æ–≤–∞ —Ä–∞–∑–≤–∏—Ç–∏—è –¥–∂–∞–∑–∞.",
    isActive: true
  },
  {
    order: 5,
    title: "–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –ë—É–¥—É—â–µ–µ",
    description: "–ü—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –∏ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ ‚Äî –Ω–∞—à –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç. –ú—ã –æ—Ç–∫—Ä—ã—Ç—ã –∫ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∞–º, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º –∏ –∫—Ä–æ—Å—Å-–∫—É–ª—å—Ç—É—Ä–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º, –¥–µ–ª–∞—è –¥–∂–∞–∑ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –º–æ–ª–æ–¥–µ–∂–∏.",
    isActive: true
  }
]

async function addManifestPrinciple(principle) {
  try {
    const response = await fetch(`${API_URL}/api/manifest-principles`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(principle)
    })
    
    if (!response.ok) {
      const errorText = await response.text()
      throw new Error(`HTTP error! status: ${response.status}, body: ${errorText}`)
    }
    
    const result = await response.json()
    console.log(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏–Ω—Ü–∏–ø: ${principle.title}`)
    return result
  } catch (error) {
    console.error(`‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–∞ "${principle.title}":`, error.message)
    return null
  }
}

async function main() {
  console.log('üéµ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ–º–æ-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ Russian Jazz Service...')
  console.log(`üì° –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ CMS: ${API_URL}`)
  
  let successCount = 0
  
  for (const principle of manifestPrinciples) {
    const result = await addManifestPrinciple(principle)
    if (result) {
      successCount++
    }
    // –ù–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
    await new Promise(resolve => setTimeout(resolve, 500))
  }
  
  console.log('')
  console.log('üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:')
  console.log(`‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ: ${successCount} –∏–∑ ${manifestPrinciples.length}`)
  
  if (successCount > 0) {
    console.log('')
    console.log('üöÄ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:')
    console.log('1. –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É: http://localhost:3002/admin')
    console.log('2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã')
    console.log('3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å—Ç–∞—Ç–∏–∫–∏: npm run build:static')
  }
}

main().catch(console.error)
